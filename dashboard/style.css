/* ------- Dashboard Styling -------- */
/* 
    These are the global styles of the dashboard, they are applied to all elements.
    The dashboard container is made so that it is centered within the page and has a max witdth.
    The max-width parameter can be adjusted to auto if we want it to occupy the full width of the screen.
    For now I have it in 1600px to visualize everything better on my screen.
*/
@font-face {
    font-family: 'Chomsky'; /*a name to be used later*/
    src: url('/chomsky/Chomsky.otf'); /*URL to font*/
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Arial', sans-serif;
    background-color: #f5f5f5;
    color: #333;
}

.dashboard-container {
    width: 99vw;
    height: 99vh;
    margin: 5px;
    padding: 5px;
    background-color: white;
    border: 2px solid #333;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    box-sizing: border-box;
}

/* ------- Title Section -------- */
/* 
    These are the main sections of the title, so they basically define the looks of the 
    heading (h1) and the subheading (h2). 

*/
.title-section {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    border-bottom: 2px solid #333;
    padding-bottom: 2px;
}

.title-section h1 {
    grid-column: 2;
    text-align: center;
    font-family: 'Chomsky';
    font-size: 3.5em;
    letter-spacing: 3px;
    margin-bottom: 5px;
}

.title-section h2 {
    font-size: 2em;
    font-weight: normal;
    color: #666;
}

.title-edition {
    grid-column: 1;
    text-align: left;
    font-family: 'Arial', sans-serif;
    font-size: 14px;
    font-weight: normal;
    color: #666;
    padding-left: 10px;
}

/* ------- Filter Section -------- */
/* 
    The filter section seems complex, but it only has this many elements because of the interactivity of the buttons.
    The .filter-section is the main container that holds everything. The .behavior-filters and .color-filters are the sub-containers
    that group the related filters together.

    Apart from this, the rest are just styles for the buttons and the color options.
*/
.filter-section {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: center;
    padding: 5px;
    margin: 10px;
    background-color: #f9f9f9;
    border: 1px solid #ddd;
    overflow: visible;
    gap: 1vw;
}

.behavior-filters {
    display: flex;
    gap: 1vw;
    align-items: flex-start;
    overflow: visible;
}

/* Dropdown Container */
.filter-dropdown {
    position: relative;
    display: inline-block;
}

.filter-btn {
    padding: 8px 16px;
    border: 2px solid #333;
    background-color: #e0e0e0;
    cursor: pointer;
    font-size: 14px;
    font-weight: bold;
    transition: background-color 0.3s;
    min-width: 100px;
}

.filter-btn:hover {
    background-color: #d0d0d0;
}

.filter-btn.active {
    background-color: #4CAF50;
    color: white;
    border-color: #4CAF50;
}

/* Dropdown Content */
.dropdown-content {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    background-color: white;
    min-width: 160px;
    border: 2px solid #333;
    border-top: none;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1000;
    padding: 5px 0;
}

.dropdown-content.show {
    display: block;
}

/* Checkbox Items */
.checkbox-item {
    display: flex;
    align-items: center;
    padding: 8px 12px;
    cursor: pointer;
    font-size: 13px;
    transition: background-color 0.2s;
}

.checkbox-item:hover {
    background-color: #f1f1f1;
}

.checkbox-item input[type="checkbox"] {
    margin-right: 8px;
    cursor: pointer;
}

.checkbox-item span {
    cursor: pointer;
    user-select: none;
}

.color-filters {
    display: flex;
    align-items: center;
    gap: 10px;
}

.label {
    font-weight: bold;
    font-size: 14px;
}

.color-options {
    display: flex;
    gap: 5px;
}

.color-option {
    cursor: pointer;
    padding: 5px;
    border: 2px solid transparent;
    border-radius: 50%;
}

.color-option.active {
    border-color: #333;
}

.squirrel-icon {
  width: 36px;
  height: 36px;
  object-fit: contain;  /* keeps aspect ratio */
  cursor: pointer;
}

.reset-filters {
    display: flex;
    align-items: center;
    gap: 10px;
}

#reset-filters-btn {
    cursor: pointer;
    padding: 8px 12px;
    border: 2px solid #333;
    border-radius: 25px;
    background-color: #e0e0e0;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: all 0.3s ease;
    user-select: none;
    font-weight: bold;
    font-size: 14px;
    color: #333;
}

#reset-filters-btn:hover {
    background-color: #d0d0d0;
}

/* Red X icon */
#reset-filters-btn::before {
    content: "âœ–"; /* Unicode cross mark */
    color: #f44336; /* red */
    font-size: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Green click effect */
#reset-filters-btn:active {
    background-color: #4CAF50;
    color: white;
    border-color: #4CAF50;
}

#reset-filters-btn:active::before {
    color: white; /* X turns white when clicked */
}


.dog-filter {
    display: flex;
    align-items: center;
    gap: 10px;
}

.dog-toggle {
    cursor: pointer;
    padding: 8px 12px;
    border: 2px solid #333;
    border-radius: 25px;
    background-color: #e0e0e0;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: all 0.3s ease;
    user-select: none;
}

.dog-toggle:hover {
    background-color: #d0d0d0;
}

.dog-toggle.active {
    background-color: #4CAF50;
    color: white;
    border-color: #4CAF50;
}

.dog-toggle.active .toggle-text {
    color: white;
}

.dog-icon {
    font-size: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.toggle-text {
    font-size: 14px;
    font-weight: bold;
    color: #333;
    transition: color 0.3s ease;
}

/* ------- Dashboard Content -------- */
/*
    The dashboard content is the main area where the visualizations are displayed. It basically holds
    all the charts and the map.
*/
.dashboard-content {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* ------- Map Section -------- */
/*
    The map section is designed to occupy the full width of the dashboard content area.
    It has a border and padding to separate it visually from other sections.

    For now, the .Map div is just a placeholder with a gray background. We have to change it later to the actual map
    It could also occupy all the space, depending on how we want to visualize it. We can eliminate the white margins.
*/
.map-section {
    border: 2px solid #333;
    padding: 5px;
    width: 100%;
    box-sizing: border-box;
    position: relative;
    height: 35.5vh;
    display: flex;
    flex-direction: column;
}

.Map {
    width: 100%;
    min-height: 160px;
    background-color: #f0f0f0;
    position: relative;
    overflow: hidden;
    flex-grow: 1;
    min-height: 0;
}

/* ------- Map Tooltip -------- */
/*
    This styles the static info panel in the bottom-right corner of the map.
    It shows a summary by default and squirrel details on hover.
*/
.map-tooltip {
  /* --- Positioning & Sizing --- */
  position: absolute;
  right: 10px;
  bottom: 10px;
  width: 165px;  
  height: 260px;
  
  /* --- Box Model --- */
  padding: 10px;
  border: 2px solid #333;
  border-radius: 4px;

  /* --- Appearance --- */
  background-color: #f9f9f9; 
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
  font-family: 'Times New Roman', Times, serif;
  align-content: justify-content;
  color: #333;

  /* --- Functionality --- */
  pointer-events: none; 
  overflow-y: auto;   
}

/* --- Styles for the content inside the tooltip --- */

.map-tooltip .tooltip-title {
  margin: 0 0 5px 0;
  border-bottom: 1px solid #ccc; 
  padding-bottom: 5px;
  font-size: 16px;
  font-weight: bold;
  color: #333; 
}

.map-tooltip .tooltip-subtitle {
  font-size: 15px;
  font-weight: bold;
  margin: 0 0 5px 0; 
}

.map-tooltip .tooltip-stat {
  display: flex;
  justify-content: space-between; 
  margin-top: 0; 
  font-size: 15px;
}

.map-tooltip .tooltip-stat span {
  color: #444; 
  display: block;
}

/* A simple horizontal line */
.map-tooltip hr {
  border: 0;
  border-top: 1px solid #ccc;
  margin: 5px 0; 
}
/* ------- Brush Toggle Button for Map ------- */
.brush-toggle-button {
  position: absolute;
  top: 15px;
  right: 15px;
  z-index: 100;
  padding: 8px 16px;
  border: 2px solid #333;
  background-color: #e0e0e0;
  cursor: pointer;
  font-size: 14px;
  font-weight: bold;
  transition: all 0.3s ease;
  border-radius: 4px;
  user-select: none;
  width: 165px;
}

.brush-toggle-button:hover {
  background-color: #d0d0d0;
}

.brush-toggle-button.active {
  background-color: #4CAF50;
  color: white;
  border-color: #4CAF50;
}

.brush-toggle-button:active {
  transform: scale(0.98);
}

/* ------- Bottom Charts Section -------- */
.bottom-charts {
    display: grid;
    grid-template-columns: 5fr 4fr; /* 5/4 ratio */
    gap: 10px;
    height: 35vh;
    min-height: 200px;
}


/* ------- Charts Section -------- */
/*
    Same explanation as the map.
*/
.butterfly-section,
.linechart-section {
    border: 2px solid #333;
    padding: 10px;
    background-color: white;
    min-height: 280px;
    height: 45vh;
    position: relative;
}

.butterfly-section h3,
.linechart-section h3 {
    text-align: center;
    margin: 5px;
    font-size: 20px;
    font-weight: bold;
}

.butterfly-title {
    font-family: 'Times New Roman', Times, serif;
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    margin: 0;
    font-size: 20px;
    font-weight: bold;
    white-space: nowrap;
}

.linechart-title {
    font-family: 'Times New Roman', Times, serif;
    font-weight: bold;
}

.ButterflyChart {
    width: 100%;
    height: 40vh;
}

.frequency-label {
    text-align: center;
    font-size: 1vw;
    font-style: italic;
}

.LineChart {
    width: 100%;
    height: 40vh;
    min-height: 280px;
}


/* ------- SVG Styles -------- */
.axis {
    font-size: 12px;
}

.axis-label {
    font-size: 14px;
    font-weight: bold;
}

.legend {
    font-size: 12px;
}

/* ------- Toggle Button Styling for Butterfly Chart ------- */

/* ------- Toggle Container with Labels ------- */
.toggle-container {
  display: flex;
  align-items: center;
  gap: 8px; /* space between text and switch */
}

/* Label text */
.toggle-label {
  font-size: 13px;
  font-weight: 600;
  color: #333;
  user-select: none;
}

.toggle-label.left {
  margin-right: 4px;
}

.toggle-label.right {
  margin-left: 4px;
}
/* ------- Toggle Switch ------- */
.switch {
  position: relative;
  display: inline-block;
  width: 46px;
  height: 26px;
}

.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

/* The slider background */
.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  transition: 0.4s;
  border-radius: 26px;
}

/* The knob */
.slider:before {
  position: absolute;
  content: "";
  height: 20px;
  width: 20px;
  left: 3px;
  bottom: 3px;
  background-color: white;
  transition: 0.4s;
  border-radius: 50%;
}

/* When checked (ON) */
input:checked + .slider {
  background-color: #4CAF50;  
}

input:checked + .slider:before {
  transform: translateX(20px);
}

/* Green hover effect */
.slider:hover {
  box-shadow: 0 0 2px #4CAF50;
}

/* Selected squirrels on the map */
.squirrel-dot.selected circle,
.squirrel-dot.selected path {
  filter: drop-shadow(0 0 2px rgba(0,0,0,0.35));
}



/* ------- Responsive Design -------- */
@media (max-width: 768px) {
    .dashboard-container {
        padding: 10px;
    }
    .bottom-charts {
        grid-template-columns: 1fr;
        height: auto;
    }
    .filter-section {
        flex-direction: column;
        gap: 2vw;
    }
    .behavior-filters {
        justify-content: center;
        flex-wrap: wrap;
    }
    .Map {
        height: 25vh;
        min-height: 120px;
    }
    .ButterflyChart {
        height: 20vh;
        min-height: 100px;
    }
}